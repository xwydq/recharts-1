---
title: "Widget 33 - Theme"
author: "Yiying Wang"
date: "`r Sys.Date()`"
output: 
  knitr:::html_vignette:
    number_sections: yes
    theme: cosmo
    toc: yes
    self_contained: no
    lib_dir: libs
vignette: >
  %\VignetteIndexEntry{Widget 33 - Theme}
  %\VignetteEngine{knitr::rmarkdown_notangle}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

First, you should load `recharts`:
```{r}
library(recharts)
```

# Introduction

`setTheme` is the main aesthetic function in recharts. It can

- set pre-installed themes
- set color palette
- set misc aesthetic features

# Function Call

```r
setTheme(chart, theme = c("asis", "default", "macarons", "infographic",
  "blue", "dark", "gray", "green", "helianthus", "macarons2", "mint", "red",
  "roma", "sakura", "shine", "vintage"), palette = "asis", bgColor = NULL,
  renderAsImage = FALSE, calculable = FALSE, calculableColor = NULL,
  calculableHolderColor = NULL, animation = TRUE, animationEasing = NULL,
  animationDuration = NULL, width = NULL, height = NULL, ...)
```

+---------------------+--------------------------------------------------------+
|   Arg               |  Requirement                                           |
+=====================+========================================================+
| **chart**           | Echarts object generated by `echartR` or `echart`.  |
+---------------------+--------------------------------------------------------+
| theme               | theme name or theme object |
|                     |               |
|                     | - pre-installed themes       |
|                     |       + 'default', 'macarons', 'infographic', 'blue', 'dark', |
|                     | 'gray', 'green', 'helianthus', 'macarons2', 'mint', 'red', 'roma', |
|                     | 'sakura', 'shine', 'vintage' |
|                     | - user-defined themes    |
|                     |       + A list. E.g., `list(color=c('#ff7f50',` `'#87cefa',` |
|                     | `'#da70d6',` `'#32cd32',` `'#6495ed'),` `title=list(x='left',` | 
|                     | `y='top'),` `legend=list(orient='horizontal'))` |
+---------------------+--------------------------------------------------------+
| palette             | name of the palette or a color vector. Default NULL to get echarts default.  |
|                     |            |
|                     | - 'asis'    |
|                     |      + keep the color palette applied in current echarts object |
|                     | - Echarts theme palette  |
|                     |      + "_default", "_macarons", "_infographic", "_blue", "_dark", "_gray", "_green", "_helianthus", "_macarons2", "_mint", "_red", "_roma", "_sakura", "_shine", "_vintage" |
|                     | - `RColorBrewer` palettes |
|                     |      + 'BrBG', 'PiYG', 'PRGn', 'PuOr', 'RdBu', 'RdGy', 'RdYlBu', 'RdYlGn', 'Spectral', 'Accent', 'Dark2', 'Paired', 'Pastel1', 'Pastel2', 'Set1', 'Set2', 'Set3', 'Blues', 'BuGn', 'BuPu', 'GnBu', 'Greens', 'Greys', 'Oranges', 'OrRd', 'PuBu', 'PuBuGn', 'PuRd', 'Purples', 'RdPu', 'Reds', 'YlGn', 'YlGnBu', 'YlOrBr', 'YlOrRd'  |
|                     | - `ggthemes` palettes    |
|                     |      + 'calc', 'economist', 'economist_white', 'economist_stata', 'excel', 'exel_fill', 'excel_line', 'excel_new', 'few', 'fivethirtyeight', '538', 'manyeyes', 'gdocs', 'pander', 'tableau', 'stata', 'stata1','stata1r','statamono', 'ptol', 'tableau20', 'tableau10medium', 'tableaugray', 'tableauprgy', 'tableaublrd', 'tableaugnor', 'tableaucyclic', 'tableau10light', 'tableaublrd12', 'tableauprgy12', 'tableaugnor12','hc','darkunica', 'solarized', 'solarized_red', 'solarized_yellow', 'solarized_orange', 'solarized_magenta', 'solarized_violet', 'solarized_blue', 'solarized_cyan', 'solarized_green', 'wsj', 'wsj_rgby', 'wsj_red_green', 'wsj_black_green', 'wsj_dem_rep', 'colorblind', 'trafficlight' |
|                     | - others |
|                     |      + 'rainbow', 'terrain', 'topo', 'heat', 'cm' |
|                     |        |
|                     | **Usage**       |
|                     |        |
|                     | - If the value is not set, and the function defaults will be loaded  |
|                     | - Set `palette=NULL` to use Echarts defaults |
|                     | - Set `palette=palette name` to assign any palette listed above |
|                     | - Set `palette=palette name(number)` to restrict number of colors within the palette (e.g., `palette='calc(3)'` picks 3 colors out of 'calc' RANDOMLY) |
|                     | - Set `palette=c(color1, color2, color3, ...)` to define a palette vector, made of which either color names or Hex expressions. Use `colors()` to check available color names and check the effects using `demo(colors)`.  |
+---------------------+--------------------------------------------------------+
| bgColor             | Color name/value of the background. Default is transparent ('rgba(0,0,0,0)') |
+---------------------+--------------------------------------------------------+
| renderAsImage       | Logical. If TRUE, the interactive effects are disabled. Default FALSE. |
+---------------------+--------------------------------------------------------+
| calculable          | Logical. If TRUE, the chart is re-calculated after drag. Default FALSE. |
+---------------------+--------------------------------------------------------+
| calculableColor     | The border color of the tooltip during calculable effect. Default 'rgba(255,165,0,0.6)'. |
+---------------------+--------------------------------------------------------+
|calculableHolderColor| The color of calculableHolder. Default '#ccc'. |
+---------------------+--------------------------------------------------------+
| animation           | Logical. If TRUE, the animation is on at initiation. Default TRUE. For IE8, it is recommended to set FALSE. |
+---------------------+--------------------------------------------------------+
| animationEasing     | The slight moving effect of major elements. Default 'ExponentialOut'. Other choices: 'Linear', 'QuadraticIn', 'QuadraticOut', 'QuadraticInOut', 'CubicIn', 'CubicOut', 'CubicInOut', 'QuarticIn', 'QuarticOut', 'QuarticInOut', 'QuinticIn', 'QuinticOut', 'QuinticInOut', 'SinusoidalIn', 'SinusoidalOut', 'SinusoidalInOut', 'ExponentialIn', 'ExponentialInOut', 'CircularIn', 'CircularOut', 'CircularInOut', 'ElasticIn', 'ElasticOut', 'ElasticInOut', 'BackIn', 'BackOut', 'BackInOut', 'BounceIn', 'BounceOut', 'BounceInOut' |
+---------------------+--------------------------------------------------------+
| animationDuration   | The duration into animation. Default 2000 (ms). |
+---------------------+--------------------------------------------------------+
| width               | Width (px) of the whole chart. Default NULL (auto). |
+---------------------+--------------------------------------------------------+
| height              | Height (px) of the whole chart. Default NULL (auto). |
+---------------------+--------------------------------------------------------+
| ...                 | Elipsis |
+---------------------+--------------------------------------------------------+

## User-defined Theme (UDT)

You can design your prefered themes using <http://echarts.baidu.com/echarts2/doc/example/themeDesigner.html>.

The UDTs in echarts are JS objects. You can write it in a list form and setTheme will parse it into JSON string for process. 

A typical theme JS looks like: 
```javascript
{
    color: ['#ff7f50','#87cefa','#da70d6','#32cd32','#6495ed'], 
    title: {x: 'left', y: 'top'}, 
    legend: {orient: 'horizontal'} 
}
```

You should write in the format below: 
```r
list(
     color=c('#ff7f50','#87cefa','#da70d6','#32cd32','#6495ed'), 
     title=list(x='left', y='top'), 
     legend=list(orient='horizontal')
)
```

# Showcase

## Pre-installed Themes

### default

```{r}
g <- echartr(mtcars, wt, mpg, carb, weight=hp, z=am, type='bubble') %>% 
    setSymbols('circle')
g
```

### macarons

```{r}
g %>% setTheme('macarons')
```

### infographic

```{r}
g %>% setTheme('infographic')
```

### blue

```{r}
g %>% setTheme('blue')
```

### dark

```{r}
g %>% setTheme('dark')
```

### gray

```{r}
g %>% setTheme('gray')
```

### green

```{r}
g %>% setTheme('green')
```

### helianthus

```{r}
g %>% setTheme('helianthus')
```

### macarons2

```{r}
g %>% setTheme('macarons2')
```

### mint

```{r}
g %>% setTheme('mint')
```

### red

```{r}
g %>% setTheme('red')
```

### roma

```{r}
g %>% setTheme('roma')
```

### sakura

```{r}
g %>% setTheme('sakura')
```

### shine

```{r}
g %>% setTheme('shine')
```

### vintage

```{r}
g %>% setTheme('vintage')
```

## User-defined Theme

Let's compose a UDT.

```{r}
udt <- list(
    backgroundColor="#d5e4eb", grid=list(borderWidth=0),
    categoryAxis=list(axisLine=list(lineStyle=list(width=2)),
                      splitLine=list(lineStyle=list(width=1, color='white'))),
    valueAxis=list(splitLine=list(lineStyle=list(width=1, color='white')),
                   axisLine=list(lineStyle=list(width=0)))
)
g %>% setXAxis(splitLine=list(show=FALSE)) %>% setTheme(udt)
```

## Palette

### Theme Palettes

All the pre-installed theme contain a palette. If you do not apply all the sytles of the theme, you can assign `palette='_theme name'`. Remember to add a "_" in front of the theme name.

```{r}
g %>% setTheme(palette="_dark")
```

### `RColorBrewer` Palettes

You can also assign `RColorBrewer` palettes: 'BrBG', 'PiYG', 'PRGn', 'PuOr', 'RdBu', 'RdGy', 'RdYlBu', 'RdYlGn', 'Spectral', 'Accent', 'Dark2', 'Paired', 'Pastel1', 'Pastel2', 'Set1', 'Set2', 'Set3', 'Blues', 'BuGn', 'BuPu', 'GnBu', 'Greens', 'Greys', 'Oranges', 'OrRd', 'PuBu', 'PuBuGn', 'PuRd', 'Purples', 'RdPu', 'Reds', 'YlGn', 'YlGnBu', 'YlOrBr', 'YlOrRd'.

```{r}
g %>% setTheme(palette='PRGn')
```

### `ggthemes` Palettes

You can assign `ggthemes` palettes: 'calc', 'economist', 'economist_white', 'economist_stata', 'excel', 'exel_fill', 'excel_line', 'excel_new', 'few', 'fivethirtyeight', '538', 'manyeyes', 'gdocs', 'pander', 'tableau', 'stata', 'stata1','stata1r','statamono', 'ptol', 'tableau20', 'tableau10medium', 'tableaugray', 'tableauprgy', 'tableaublrd', 'tableaugnor', 'tableaucyclic', 'tableau10light', 'tableaublrd12', 'tableauprgy12', 'tableaugnor12','hc','darkunica', 'solarized','solarized_red', 'solarized_yellow', 'solarized_orange', 'solarized_magenta', 'solarized_violet', 'solarized_blue', 'solarized_cyan', 'solarized_green', 'wsj', 'wsj_rgby', 'wsj_red_green', 'wsj_black_green', 'wsj_dem_rep', 'colorblind', 'trafficlight'.

```{r}
g %>% setTheme(palette='tableau20')
```

### Other Palettes

You can assign other palettes: 'rainbow', 'terrain', 'topo', 'heat', 'cm'.

```{r}
g %>% setTheme(palette='terrain')
```

### User-defined Palettes

You can also compose a palette by concatenating a vector of colors yourself. E.g.:

- c('red', 'yellow', 'green')
- c('#FF0000', '#FFFF00', '#00FF00')

```{r}
g %>% setTheme(palette=c(
    'red', 'yellow', 'orange', 'limegreen', 'cyan', 'violet'))
```

## Other Aesthetics

### `bgColor`

```{r}
g %>% setTheme(bgColor='darkblue')
```

### `renderAsImage`

Disable the interactive effects.
```{r}
g %>% setTheme(renderAsImage=TRUE)
```

### `calculable`

Use pie chart for example. Try dragging a fan away.

```{r}
echartr(mtcars, am, hp, type='ring') %>% 
    setTheme(calculable=TRUE, calculableColor='yellow', 
             calculableHolderColor='gold')
```

### `animation`

```{r}
g %>% setTheme(animation=TRUE, animationEasing='BounceInOut',
               animationDuration=500)
```

### `width` And `height`

```{r}
g %>% setTheme(width=400, height=300)
```

# References

theme   

<http://echarts.baidu.com/echarts2/doc/example/theme.html>

backgroundColor   

<http://echarts.baidu.com/echarts2/doc/option.html#title~backgroundColor>

colors   

<http://echarts.baidu.com/echarts2/doc/option.html#title~color>         
<http://colorbrewer2.org>

other features   

<http://echarts.baidu.com/echarts2/doc/option.html#title~renderAsImage>    
<http://echarts.baidu.com/echarts2/doc/option.html#title~calculable>      
<http://echarts.baidu.com/echarts2/doc/option.html#title~animation>        
<http://echarts.baidu.com/echarts2/doc/option.html#title~calculableColor>      
<http://echarts.baidu.com/echarts2/doc/option.html#title~calculableHolderColor>
