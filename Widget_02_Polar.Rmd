---
title: "Widget 02 - Polar"
output: 
  html_document: 
    number_sections: yes
    toc: yes
    toc_depth: 4
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

First, you should load `recharts`:
```{r}
library(recharts)
```

# Introduction

Radar charts are based on Polar Coordinate System, which calls for center and radius. When you generate an Echarts object of radar chart using `echartr`, you can then modify the axes by `setPolar`. 

# Function Call

```r
setPolar(chart, polarIndex = NULL, center = c("50%", "50%"),
  radius = "75%", startAngle = 90, splitNumber = 5, boundaryGap = c(0,
  0), scale = FALSE, axisLine = NULL, axisLabel = NULL,
  splitLine = NULL, splitArea = NULL, type = c("polygon", "circle"),
  indicator = NULL, axisName = NULL, ...)
```

+-------------+----------------------------------------------------------------+
|   Arg       |  Requirement                                                |
+=============+================================================================+
|**chart**    | Echarts object generated by `echartR` or `echart`.  |
+-------------+----------------------------------------------------------------+
| PolarIndex  | Integer vector. The index of the polar systems you want to set. Default NULL. |
+-------------+----------------------------------------------------------------+
| center      | Vector of the x, y position of the polar center. Could be numeric or character (percent form) vectors of length 2. Default c('50%', '50%'). |
+-------------+----------------------------------------------------------------+
| radius      | The radius of the polar system, could be numeric or character (percent form). Default '75%'. |
+-------------+----------------------------------------------------------------+
| startAngle  | Numeric (-180 ~ 180). The start angle. Default 90. |
+-------------+----------------------------------------------------------------+
| splitNumber | Numeric. The number of sections to divide. Default 5. |
+-------------+----------------------------------------------------------------+
| boundaryGap | Numeric vector of length 2. The gapping policy of the axis. Default `c(0, 0)`. |
+-------------+----------------------------------------------------------------+
| scale       | Logical. Whether to ignore zero and zoom toward the range of _min and _max. |
+-------------+----------------------------------------------------------------+
| axisLine    | List. Axis line styles. You can set its show, onZero, lineStyle features. Default `list(show=TRUE)`. |
+-------------+----------------------------------------------------------------+
| axisLabel   | List. Axis label styles. You can set its `show, rotate, margin`, `clickable, formatter, textStyle` features. Default `list(show=FALSE)`. |
+-------------+----------------------------------------------------------------+
| splitLine   | List. Split line styles. You can set its `show`, `lineStyle` features. Default `list(show=TRUE)`. |
+-------------+----------------------------------------------------------------+
| splitArea   | List. Split area styles. You can set its `show`, `onGap`, `areaStyle` features. Default `list(show=TRUE)`. |
+-------------+----------------------------------------------------------------+
| type        | Character, 'polygon' or 'circle'. The type of the polar shape. Default 'polygon'.. 
+-------------+----------------------------------------------------------------+
| indicator   | List. The radar indicator and labels. The basic structure is `list(list(text='...',` `min=..., max=...,` `axisLabel=list(...)),` `list(text='...', min=..., max=...),` `list(...), ...)`. Default is empty.
+-------------+----------------------------------------------------------------+
| axisName    | List. The name of the axis. You can set its `show`, `formatter`, `textStyle` features. Default `list(show=TRUE, formatter=NULL,` `textStyle= list(color='#333'))`.  |
+-------------+----------------------------------------------------------------+
| ...         | Elipsis. |
+-------------+----------------------------------------------------------------+


# Showcase

## Data Preparation

Let's use `mtcars` to generate an Echarts objects `g`: 

```{r}
require(data.table)
cars = mtcars[c('Merc 450SE','Merc 450SL','Merc 450SLC'),
              c('mpg','disp','hp','qsec','wt','drat')]
cars$model <- rownames(cars)
cars <- data.table::melt(cars, id.vars='model')
names(cars) <- c('model', 'indicator', 'Parameter')
g <- echartr(cars, indicator, Parameter, model, type='radar') %>%
        setTitle('Merc 450SE  vs  450SL  vs  450SLC')
```


## Modification

You can change the three radars one by one using `setPolar`.

```r
g %>% setPolar(1, center=c('20%', '50%'), radius='30%', splitNumber=10) %>%
      setPolar(2, center=c('50%', '50%'), radius='35%', type='circle') %>%
      setPolar(3, center=c('80%', '50%'), radius='30%', 
            splitArea=list(show=FALSE), axisLabel=list(show=TRUE))
```

<table>
<tr><td>
```{r, echo=FALSE}
g %>% setTheme(width=400, height=300)
```
</td><td>
```{r, echo=FALSE}
g %>% setPolar(1, center=c('20%', '50%'), radius='30%', splitNumber=10) %>%
      setPolar(2, center=c('50%', '50%'), radius='35%', type='circle') %>%
      setPolar(3, center=c('80%', '50%'), radius='30%', 
            splitArea=list(show=FALSE), axisLabel=list(show=TRUE)) %>%
    setTheme(width=400, height=300)
```
</td></tr>
</table>

Or change all of the radars at one time.

```r
g %>% setPolar(splitNumber=10, type='circle', splitArea=list(
              areaStyle=areaStyle(color=c('white', 'lightblue'))))
```

<table>
<tr><td>
```{r,echo=FALSE}
g %>% setTheme(width=400, height=300)
```
</td><td>
```{r,echo=FALSE}
g %>% setPolar(splitNumber=10, type='circle', splitArea=list(
              areaStyle=areaStyle(color=c('white', 'lightblue')))) %>% 
    setTheme(width=400, height=300)
```
</td></tr>
</table>

# References

<http://echarts.baidu.com/echarts2/doc/option.html#title~polar>
